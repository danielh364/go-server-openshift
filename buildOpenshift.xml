<?xml version="1.0" encoding="UTF-8"?>

<project name="desplegarOpenshift" default="desplegarProduccion" basedir=".">
    <description>Desplegar Openshift</description>

    <target name="desplegarProduccion" depends="DeleteGitLocalPath" >
        <taskdef  resource="es/logongas/openshift/ant/antlib.xml" />

        <property name="gitlocalpath" value="/tmp/go-server-openshift/daniel/tienda" />
        <echo>${gitlocalpath}</echo>
        <delete  includeEmptyDirs="true" failonerror="false">
            <fileset defaultexcludes="no"  dir="${gitlocalpath}" includes="**/*"/>
        </delete>
        <mkdir dir="${gitlocalpath}" />

        <gitcloneapplication
            userName="daniel_mostwanted364@hotmail.com"
            password="5433290364"
            domainName="danielhdz364"
            applicationName="tienda2"
            privateKeyFile="./ssh/id_rsa"
            path="${gitlocalpath}"
        />

        <echo> -------------------------------------------------------- </echo>
        <echo>Borrar Archivos de Repositorio Inicial OpenShift</echo>
        <delete dir="${gitlocalpath}/src"></delete>
        <delete file="${gitlocalpath}/pom.xml"></delete>

        <echo> -------------------------------------------------------- </echo>
        <echo>Mover Archivos</echo>
        <move file="./go-server-openshift/" todir="${gitlocalpath}/tienda2/"/>

        <echo> -------------------------------------------------------- </echo>
        <echo> ------------------ Add, Commit-------------------- </echo>
        <git dir="${gitlocalpath}" command="add" options="*" />
        <git dir="${gitlocalpath}" command="commit" options="-am 'antAutomatizado'" />

        <gitpushapplication
            userName="daniel_mostwanted364@hotmail.com"
            password="5433290364"
            domainName="danielhdz364"
            applicationName="tienda2"
            privateKeyFile="./ssh/id_rsa"
            path="${gitlocalpath}"
        />


    </target>

    <target name="DeleteGitLocalPath">
        <delete dir="${gitlocalpath}" />
    </target>

    <property name="libs.CopyLibs.classpath" value="ant/lib/org-netbeans-modules-java-j2seproject-copylibstask.jar" />
    <property name="j2ee.server.home" value="ant" />
    <path id="tomcat.classpath">
        <fileset dir="ant/lib" includes="*.jar" />
    </path>
    <taskdef name="deploy" classname="org.apache.catalina.ant.DeployTask" classpathref="tomcat.classpath" />

</project>
